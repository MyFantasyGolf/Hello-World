{"version":3,"sources":["../../../src/db/rosterApi.js"],"names":["conn","require","ObjectId","season","moment","getActiveRosterMap","leagueId","userId","db","coll","collection","find","_id","getSeason","project","map","$elemMatch","user","module","exports"],"mappings":";;;;AAAA,IAAMA,OAAOC,QAAQ,cAAR,CAAb;AACA,IAAMC,WAAWD,QAAQ,SAAR,EAAmBC,QAApC;AACA,IAAMC,SAASF,QAAQ,iBAAR,CAAf;AACA,IAAMG,SAASH,QAAQ,QAAR,CAAf;;AAEA,IAAMI;AAAA,qEAAqB,iBAAOC,QAAP,EAAiBC,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACRP,KAAKQ,EADG;;AAAA;AACnBA,cADmB;AAEnBC,gBAFmB,GAEZD,GAAGE,UAAH,CAAc,SAAd,CAFY;AAAA;AAAA,mBAIPD,KAAKE,IAAL,CAAU;AAC1BC,mBAAKV,SAASI,QAAT,CADqB;AAE1BH,sBAAQA,OAAOU,SAAP,CAAiBT,QAAjB;AAFkB,aAAV,EAIjBU,OAJiB,CAIT;AACPC,mBAAK,EAAEC,YAAY,EAAEC,MAAMV,MAAR,EAAd;AADE,aAJS,CAJO;;AAAA;AAInBQ,eAJmB;AAAA,6CAYlBA,GAZkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAeAG,OAAOC,OAAP,GAAiB;AACfd;AADe,CAAjB","file":"rosterApi.js","sourcesContent":["const conn = require('./connection');\nconst ObjectId = require('mongodb').ObjectId;\nconst season = require('../utils/season');\nconst moment = require('moment');\n\nconst getActiveRosterMap = async (leagueId, userId) => {\n  const db = await conn.db;\n  const coll = db.collection('leagues');\n\n  const map = await coll.find({\n    _id: ObjectId(leagueId),\n    season: season.getSeason(moment())\n  })\n  .project({\n    map: { $elemMatch: { user: userId }}\n  });\n\n  return map;\n};\n\nmodule.exports = {\n  getActiveRosterMap\n};\n"]}